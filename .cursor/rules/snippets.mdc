---
description:
globs: snippets/*.liquid
alwaysApply: false
---
# Snippet Development Standards

## Snippet Documentation

Every snippet must include JSDoc-style comments using LiquidDoc:

```liquid
{% doc %}
  Product Card Component

  Renders a product card with customizable options.

  @param product {Object} Product object (required)
  @param show_vendor {Boolean} Display vendor name (default: false)
  @param show_quick_add {Boolean} Show quick add button (default: false)
  @param image_ratio {String} Image aspect ratio (default: 'adapt')
  @param lazy_load {Boolean} Enable lazy loading (default: true)
  @param card_class {String} Additional CSS classes

  @example
    {% render 'product-card',
       product: product,
       show_vendor: true,
       image_ratio: 'square'
    %}
{% enddoc %}
```

## Parameter Handling

Always provide defaults and validate parameters:

```liquid
{% liquid
  # Parameter validation and defaults
  assign product = product | default: empty
  assign show_vendor = show_vendor | default: false
  assign show_quick_add = show_quick_add | default: false
  assign image_ratio = image_ratio | default: 'adapt'
  assign lazy_load = lazy_load | default: true
  assign card_class = card_class | default: ''

  # Early return if required parameters missing
  unless product != empty
    echo '<!-- Error: product parameter required for product-card snippet -->'
    break
  endunless
%}
```

## Common Snippet Patterns

**Product Detail Price Snippet:**
```liquid
{% doc %}
  Product Detail Price

  Price displayed on the product detail page.

  @param {object} product - The product to display - required
  @param {object} [current_variant] - The current variant to display - optional

  @example
    {% render 'product-price',
              product: product,
              current_variant: product.variants.first
    %}
{% enddoc %}

{%- liquid
  assign current_variant = current_variant | default: product.selected_or_first_available_variant

  comment
    Template Vars
  endcomment
  assign has_compare = false
  assign current_variant_on_sale = false

  if product.compare_at_price_max > product.price
    assign has_compare = true
  endif

  if current_variant.compare_at_price > current_variant.price
    assign current_variant_on_sale = true
  endif  
%}

<div
  data-component="product-price"
  role="status"
>
  <span data-price>
    {{ current_variant.price | money_without_trailing_zeros }}
  </span>

  {% if has_compare %}
    <span data-compare>
      <span class="sr-only">
        {{ 'products.product.regular_price' | t }}
      </span>
      
      <s
        {% if current_variant_on_sale != true %}style="display: none"{% endif %}
        data-compare-price
      >
        {% if current_variant_on_sale %}
          {{ current_variant.compare_at_price | money }}
        {% endif %}
      </s>
    </span>
  {% endif %}
</div>  
```

## Testing Patterns

Include testing scenarios in comments:

```liquid
{% comment %}
  Test cases:
  - Product with variants
  - Product without image
  - Product with compare_at_price
  - Product with unit pricing
  - Out of stock product
{% endcomment %}
```

[snippet-example.liquid](mdc:.cursor/rules/examples/snippet-example.liquid)